<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  body{
    margin:0;
    font-family: Arial, sans-serif;
    background: radial-gradient(circle at 20% 10%, #eef6ff 0%, #f7fbff 35%, #fff 100%);
    overflow:hidden;
  }

  .frame{
    height:100vh;
    box-sizing:border-box;
    padding:18px 22px;
    border:3px solid #caa23b;
    border-radius:12px;
    background: linear-gradient(180deg, rgba(255,255,255,0.94), rgba(255,255,255,0.88));
  }

  .top{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap:16px;
  }

  .clock{
    font-size:64px;
    font-weight:800;
    color:#111;
    letter-spacing:1px;
    line-height:1;
  }
  .clock small{ font-size:28px; font-weight:700; margin-right:8px; color:#111; }

  .titleBox{
    text-align:right;
  }
  .title{
    font-size:26px;
    font-weight:800;
    color:#111;
  }

  .logoRow{
    display:flex;
    justify-content:flex-end;
    align-items:center;
    gap:12px;
    margin-top:6px;
  }

  .logo{
    width:62px;
    height:62px;
    border-radius:10px;
    background:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 6px 18px rgba(0,0,0,0.08);
    overflow:hidden;
  }
  .logo img{ width:100%; height:100%; object-fit:contain; }

  .datebar{
    margin-top:12px;
    background:#fff;
    border-radius:16px;
    padding:10px 14px;
    text-align:center;
    box-shadow:0 8px 22px rgba(0,0,0,0.06);
    font-size:18px;
    color:#111;
  }

  .badge{
    display:inline-block;
    margin-left:10px;
    background: linear-gradient(45deg,#b8891a,#f6e08d,#b8891a);
    color:#111;
    padding:6px 14px;
    border-radius:999px;
    font-weight:800;
    font-size:15px;
    box-shadow:0 6px 16px rgba(186,137,26,0.25);
  }

  .banner{
    margin-top:12px;
    background: linear-gradient(45deg,#a87512,#f7e39a,#a87512);
    border-radius:18px;
    padding:16px 16px;
    text-align:center;
    font-size:26px;
    font-weight:900;
    color:#111;
    box-shadow:0 10px 26px rgba(0,0,0,0.10);
  }

  .grid{
    margin-top:14px;
    display:grid;
    grid-template-columns:repeat(3, 1fr);
    gap:14px;
  }

  .card{
    background:#fff;
    border-radius:16px;
    padding:14px 12px;
    text-align:center;
    box-shadow:0 10px 26px rgba(0,0,0,0.06);
    min-height:88px;
  }
  .pname{
    font-size:20px;
    font-weight:800;
    color:#111;
    margin-bottom:6px;
  }
  .ptime{
    font-size:30px;
    font-weight:900;
    color:#111;
    letter-spacing:1px;
  }

  .counts{
    margin-top:14px;
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap:14px;
  }

  .countbox{
    background:#fff;
    border-radius:18px;
    padding:14px 12px;
    box-shadow:0 10px 26px rgba(0,0,0,0.06);
    min-height:120px;
  }
  .counttitle{
    font-size:18px;
    font-weight:900;
    color:#111;
    text-align:right;
    margin-bottom:4px;
  }
  .countsub{
    font-size:16px;
    font-weight:700;
    color:#333;
    text-align:right;
    margin-bottom:6px;
  }
  .counttime{
    font-size:46px;
    font-weight:900;
    color:#111;
    text-align:center;
    letter-spacing:2px;
  }

  .hint{
    margin-top:10px;
    text-align:center;
    color:#666;
    font-size:13px;
  }

  /* Responsive fallback */
  @media (max-width: 1200px){
    .clock{ font-size:54px; }
    .banner{ font-size:22px; }
    .ptime{ font-size:26px; }
    .counttime{ font-size:40px; }
  }
</style>
</head>

<body>
<div class="frame">

  <div class="top">
    <div class="clock" id="clock">--:-- <small id="ampm">--</small></div>

    <div class="titleBox">
      <div class="title">Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© - Ø¥Ù…Ø§Ø±Ø© Ø§Ù„Ø´Ø§Ø±Ù‚Ø©</div>
      <div class="logoRow">
        <div class="logo">
          <!-- Ø¶Ø¹ Ø§Ù„Ø´Ø¹Ø§Ø± Ø¯Ø§Ø®Ù„ Ù†ÙØ³ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ Ø¨Ø§Ø³Ù…: logo.png -->
          <img src="logo.png" alt="KALIMAT">
        </div>
      </div>
    </div>
  </div>

  <div class="datebar">
    <span id="ramadanBadge" class="badge" style="display:none;">Ø±Ù…Ø¶Ø§Ù†</span>
    <span id="dateText">--</span>
  </div>

  <div class="banner">
    Ù…Ø±ÙƒØ² ÙƒÙ„Ù…Ø§Øª Ù„Ù„ØªØ£Ù‡ÙŠÙ„ ÙˆØ¹Ù„Ø§Ø¬ Ø§Ù„Ù†Ø·Ù‚ ÙŠØªÙ…Ù†Ù‰ Ù„ÙƒÙ… ØµÙŠØ§Ù…Ø§Ù‹ Ù…Ù‚Ø¨ÙˆÙ„Ø§Ù‹ ÙˆØ¥ÙØ·Ø§Ø±Ø§Ù‹ Ù‡Ù†ÙŠØ¦Ø§Ù‹ ğŸŒ™
  </div>

  <div class="grid" id="times"></div>

  <div class="counts">
    <div class="countbox">
      <div class="counttitle">Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</div>
      <div class="countsub" id="nextName">--</div>
      <div class="counttime" id="nextCount">--:--:--</div>
    </div>

    <div class="countbox">
      <div class="counttitle">ÙˆÙ‚Øª Ø§Ù„Ø¥ÙØ·Ø§Ø± (Ø§Ù„Ù…ØºØ±Ø¨)</div>
      <div class="countsub" id="iftarAt">--</div>
      <div class="counttime" id="iftarCount">--:--:--</div>
    </div>
  </div>

  <div class="hint" id="statusHint">ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£ÙˆÙ‚Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</div>

</div>

<script>
/* ===== Helpers (ES5) ===== */
function pad(n){ return (n<10) ? ("0"+n) : (""+n); }

function format12h(d){
  var h = d.getHours();
  var m = d.getMinutes();
  var ampm = (h>=12) ? "Ù…" : "Øµ";
  var h12 = h % 12;
  if(h12===0){ h12=12; }
  return { text: h12 + ":" + pad(m), ampm: ampm };
}

function todayKey(){
  var d = new Date();
  return d.getFullYear() + "-" + pad(d.getMonth()+1) + "-" + pad(d.getDate());
}

function arDayName(idx){
  var days = ["Ø§Ù„Ø£Ø­Ø¯","Ø§Ù„Ø§Ø«Ù†ÙŠÙ†","Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡","Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡","Ø§Ù„Ø®Ù…ÙŠØ³","Ø§Ù„Ø¬Ù…Ø¹Ø©","Ø§Ù„Ø³Ø¨Øª"];
  return days[idx] || "";
}

function arMonthName(m){
  var months = ["ÙŠÙ†Ø§ÙŠØ±","ÙØ¨Ø±Ø§ÙŠØ±","Ù…Ø§Ø±Ø³","Ø£Ø¨Ø±ÙŠÙ„","Ù…Ø§ÙŠÙˆ","ÙŠÙˆÙ†ÙŠÙˆ","ÙŠÙˆÙ„ÙŠÙˆ","Ø£ØºØ³Ø·Ø³","Ø³Ø¨ØªÙ…Ø¨Ø±","Ø£ÙƒØªÙˆØ¨Ø±","Ù†ÙˆÙÙ…Ø¨Ø±","Ø¯ÙŠØ³Ù…Ø¨Ø±"];
  return months[m] || "";
}

function formatGregorianArabic(d){
  return arDayName(d.getDay()) + "ØŒ " + d.getDate() + " " + arMonthName(d.getMonth()) + " " + d.getFullYear();
}

function parseHHMM(s){
  // expects "HH:MM" 24h
  var p = s.split(":");
  return { h: parseInt(p[0],10), m: parseInt(p[1],10) };
}

function makeTodayAt(hhmm){
  var now = new Date();
  var p = parseHHMM(hhmm);
  return new Date(now.getFullYear(), now.getMonth(), now.getDate(), p.h, p.m, 0, 0);
}

function diffToHMS(ms){
  if(ms < 0){ ms = 0; }
  var total = Math.floor(ms/1000);
  var hh = Math.floor(total/3600);
  var mm = Math.floor((total%3600)/60);
  var ss = total%60;
  return pad(hh)+":"+pad(mm)+":"+pad(ss);
}

/* ===== Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø´Ø§Ø±Ù‚Ø© (ÙØ¨Ø±Ø§ÙŠØ± + Ù…Ø§Ø±Ø³ 2026) ===== */
var SHJ = {
  "2026-02-01":{hijri:"13 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:42",sunrise:"06:58",dhuhr:"12:34",asr:"15:41",maghrib:"18:05",isha:"19:21"},
  "2026-02-02":{hijri:"14 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:42",sunrise:"06:58",dhuhr:"12:34",asr:"15:41",maghrib:"18:06",isha:"19:22"},
  "2026-02-03":{hijri:"15 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:41",sunrise:"06:57",dhuhr:"12:34",asr:"15:42",maghrib:"18:07",isha:"19:23"},
  "2026-02-04":{hijri:"16 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:41",sunrise:"06:57",dhuhr:"12:34",asr:"15:42",maghrib:"18:07",isha:"19:23"},
  "2026-02-05":{hijri:"17 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:40",sunrise:"06:56",dhuhr:"12:35",asr:"15:43",maghrib:"18:08",isha:"19:24"},
  "2026-02-06":{hijri:"18 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:40",sunrise:"06:55",dhuhr:"12:35",asr:"15:43",maghrib:"18:09",isha:"19:24"},
  "2026-02-07":{hijri:"19 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:40",sunrise:"06:55",dhuhr:"12:35",asr:"15:44",maghrib:"18:10",isha:"19:25"},
  "2026-02-08":{hijri:"20 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:39",sunrise:"06:54",dhuhr:"12:35",asr:"15:44",maghrib:"18:10",isha:"19:26"},
  "2026-02-09":{hijri:"21 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:39",sunrise:"06:54",dhuhr:"12:35",asr:"15:45",maghrib:"18:11",isha:"19:26"},
  "2026-02-10":{hijri:"22 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:38",sunrise:"06:53",dhuhr:"12:35",asr:"15:45",maghrib:"18:12",isha:"19:27"},
  "2026-02-11":{hijri:"23 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:37",sunrise:"06:52",dhuhr:"12:35",asr:"15:46",maghrib:"18:12",isha:"19:27"},
  "2026-02-12":{hijri:"24 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:37",sunrise:"06:52",dhuhr:"12:35",asr:"15:46",maghrib:"18:13",isha:"19:28"},
  "2026-02-13":{hijri:"25 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:36",sunrise:"06:51",dhuhr:"12:35",asr:"15:47",maghrib:"18:14",isha:"19:28"},
  "2026-02-14":{hijri:"26 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:36",sunrise:"06:50",dhuhr:"12:35",asr:"15:47",maghrib:"18:14",isha:"19:29"},
  "2026-02-15":{hijri:"27 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:35",sunrise:"06:50",dhuhr:"12:35",asr:"15:47",maghrib:"18:15",isha:"19:29"},
  "2026-02-16":{hijri:"28 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:34",sunrise:"06:49",dhuhr:"12:35",asr:"15:48",maghrib:"18:15",isha:"19:30"},
  "2026-02-17":{hijri:"29 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:34",sunrise:"06:48",dhuhr:"12:35",asr:"15:48",maghrib:"18:16",isha:"19:31"},
  "2026-02-18":{hijri:"30 Ø´Ø¹Ø¨Ø§Ù† 1447",fajr:"05:33",sunrise:"06:47",dhuhr:"12:34",asr:"15:48",maghrib:"18:17",isha:"19:31"},
  "2026-02-19":{hijri:"1 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:32",sunrise:"06:47",dhuhr:"12:34",asr:"15:49",maghrib:"18:17",isha:"19:32"},
  "2026-02-20":{hijri:"2 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:32",sunrise:"06:46",dhuhr:"12:34",asr:"15:49",maghrib:"18:18",isha:"19:32"},
  "2026-02-21":{hijri:"3 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:31",sunrise:"06:45",dhuhr:"12:34",asr:"15:49",maghrib:"18:18",isha:"19:33"},
  "2026-02-22":{hijri:"4 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:30",sunrise:"06:44",dhuhr:"12:34",asr:"15:50",maghrib:"18:19",isha:"19:33"},
  "2026-02-23":{hijri:"5 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:29",sunrise:"06:43",dhuhr:"12:34",asr:"15:50",maghrib:"18:20",isha:"19:34"},
  "2026-02-24":{hijri:"6 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:29",sunrise:"06:43",dhuhr:"12:34",asr:"15:50",maghrib:"18:20",isha:"19:34"},
  "2026-02-25":{hijri:"7 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:28",sunrise:"06:42",dhuhr:"12:34",asr:"15:51",maghrib:"18:21",isha:"19:35"},
  "2026-02-26":{hijri:"8 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:27",sunrise:"06:41",dhuhr:"12:33",asr:"15:51",maghrib:"18:21",isha:"19:35"},
  "2026-02-27":{hijri:"9 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:26",sunrise:"06:40",dhuhr:"12:33",asr:"15:51",maghrib:"18:22",isha:"19:36"},
  "2026-02-28":{hijri:"10 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:25",sunrise:"06:39",dhuhr:"12:33",asr:"15:51",maghrib:"18:22",isha:"19:36"},

  "2026-03-01":{hijri:"11 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:24",sunrise:"06:38",dhuhr:"12:33",asr:"15:51",maghrib:"18:23",isha:"19:37"},
  "2026-03-02":{hijri:"12 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:24",sunrise:"06:37",dhuhr:"12:33",asr:"15:52",maghrib:"18:23",isha:"19:37"},
  "2026-03-03":{hijri:"13 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:23",sunrise:"06:36",dhuhr:"12:33",asr:"15:52",maghrib:"18:24",isha:"19:38"},
  "2026-03-04":{hijri:"14 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:22",sunrise:"06:35",dhuhr:"12:32",asr:"15:52",maghrib:"18:24",isha:"19:38"},
  "2026-03-05":{hijri:"15 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:21",sunrise:"06:34",dhuhr:"12:32",asr:"15:52",maghrib:"18:25",isha:"19:39"},
  "2026-03-06":{hijri:"16 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:20",sunrise:"06:33",dhuhr:"12:32",asr:"15:52",maghrib:"18:25",isha:"19:39"},
  "2026-03-07":{hijri:"17 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:19",sunrise:"06:32",dhuhr:"12:32",asr:"15:52",maghrib:"18:26",isha:"19:40"},
  "2026-03-08":{hijri:"18 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:18",sunrise:"06:31",dhuhr:"12:31",asr:"15:52",maghrib:"18:26",isha:"19:40"},
  "2026-03-09":{hijri:"19 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:17",sunrise:"06:30",dhuhr:"12:31",asr:"15:52",maghrib:"18:27",isha:"19:41"},
  "2026-03-10":{hijri:"20 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:16",sunrise:"06:29",dhuhr:"12:31",asr:"15:53",maghrib:"18:27",isha:"19:41"},
  "2026-03-11":{hijri:"21 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:15",sunrise:"06:28",dhuhr:"12:31",asr:"15:53",maghrib:"18:28",isha:"19:42"},
  "2026-03-12":{hijri:"22 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:14",sunrise:"06:27",dhuhr:"12:30",asr:"15:53",maghrib:"18:28",isha:"19:42"},
  "2026-03-13":{hijri:"23 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:13",sunrise:"06:26",dhuhr:"12:30",asr:"15:53",maghrib:"18:29",isha:"19:43"},
  "2026-03-14":{hijri:"24 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:12",sunrise:"06:25",dhuhr:"12:30",asr:"15:53",maghrib:"18:29",isha:"19:43"},
  "2026-03-15":{hijri:"25 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:11",sunrise:"06:24",dhuhr:"12:30",asr:"15:53",maghrib:"18:30",isha:"19:44"},
  "2026-03-16":{hijri:"26 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:10",sunrise:"06:23",dhuhr:"12:29",asr:"15:53",maghrib:"18:30",isha:"19:44"},
  "2026-03-17":{hijri:"27 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:09",sunrise:"06:22",dhuhr:"12:29",asr:"15:53",maghrib:"18:31",isha:"19:44"},
  "2026-03-18":{hijri:"28 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:08",sunrise:"06:21",dhuhr:"12:29",asr:"15:53",maghrib:"18:31",isha:"19:45"},
  "2026-03-19":{hijri:"29 Ø±Ù…Ø¶Ø§Ù† 1447",fajr:"05:07",sunrise:"06:20",dhuhr:"12:28",asr:"15:53",maghrib:"18:32",isha:"19:45"},
  "2026-03-20":{hijri:"1 Ø´ÙˆØ§Ù„ 1447",fajr:"05:05",sunrise:"06:19",dhuhr:"12:28",asr:"15:53",maghrib:"18:32",isha:"19:46"},
  "2026-03-21":{hijri:"2 Ø´ÙˆØ§Ù„ 1447",fajr:"05:04",sunrise:"06:18",dhuhr:"12:28",asr:"15:53",maghrib:"18:33",isha:"19:46"},
  "2026-03-22":{hijri:"3 Ø´ÙˆØ§Ù„ 1447",fajr:"05:03",sunrise:"06:17",dhuhr:"12:27",asr:"15:52",maghrib:"18:33",isha:"19:47"},
  "2026-03-23":{hijri:"4 Ø´ÙˆØ§Ù„ 1447",fajr:"05:02",sunrise:"06:16",dhuhr:"12:27",asr:"15:52",maghrib:"18:33",isha:"19:48"},
  "2026-03-24":{hijri:"5 Ø´ÙˆØ§Ù„ 1447",fajr:"05:01",sunrise:"06:15",dhuhr:"12:27",asr:"15:52",maghrib:"18:34",isha:"19:48"},
  "2026-03-25":{hijri:"6 Ø´ÙˆØ§Ù„ 1447",fajr:"05:00",sunrise:"06:14",dhuhr:"12:27",asr:"15:52",maghrib:"18:34",isha:"19:49"},
  "2026-03-26":{hijri:"7 Ø´ÙˆØ§Ù„ 1447",fajr:"04:59",sunrise:"06:13",dhuhr:"12:26",asr:"15:52",maghrib:"18:35",isha:"19:49"},
  "2026-03-27":{hijri:"8 Ø´ÙˆØ§Ù„ 1447",fajr:"04:58",sunrise:"06:12",dhuhr:"12:26",asr:"15:52",maghrib:"18:35",isha:"19:50"},
  "2026-03-28":{hijri:"9 Ø´ÙˆØ§Ù„ 1447",fajr:"04:57",sunrise:"06:11",dhuhr:"12:26",asr:"15:52",maghrib:"18:36",isha:"19:50"},
  "2026-03-29":{hijri:"10 Ø´ÙˆØ§Ù„ 1447",fajr:"04:55",sunrise:"06:10",dhuhr:"12:25",asr:"15:52",maghrib:"18:36",isha:"19:51"},
  "2026-03-30":{hijri:"11 Ø´ÙˆØ§Ù„ 1447",fajr:"04:54",sunrise:"06:09",dhuhr:"12:25",asr:"15:52",maghrib:"18:37",isha:"19:51"},
  "2026-03-31":{hijri:"12 Ø´ÙˆØ§Ù„ 1447",fajr:"04:53",sunrise:"06:08",dhuhr:"12:25",asr:"15:51",maghrib:"18:37",isha:"19:52"}
};

/* ===== UI Render ===== */
var currentRow = null;
var timersStarted = false;

function renderToday(){
  var key = todayKey();
  currentRow = SHJ[key];

  if(!currentRow){
    document.getElementById("statusHint").innerHTML = "Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¬Ø¯ÙˆÙ„ Ù„Ù‡Ø°Ø§ Ø§Ù„ØªØ§Ø±ÙŠØ®: " + key;
    return;
  }

  var now = new Date();
  var dateLine = formatGregorianArabic(now) + " | " + currentRow.hijri;
  document.getElementById("dateText").innerHTML = dateLine;

  // Ramadan badge
  if(currentRow.hijri.indexOf("Ø±Ù…Ø¶Ø§Ù†") > -1){
    var day = currentRow.hijri.split(" ")[0]; // "7" etc.
    document.getElementById("ramadanBadge").innerHTML = "Ø§Ù„ÙŠÙˆÙ… " + day + " Ù…Ù† Ø±Ù…Ø¶Ø§Ù†";
    document.getElementById("ramadanBadge").style.display = "inline-block";
  }else{
    document.getElementById("ramadanBadge").style.display = "none";
  }

  // Prayer grid
  var prayers = [
    ["Ø§Ù„ÙØ¬Ø±", currentRow.fajr],
    ["Ø§Ù„Ø´Ø±ÙˆÙ‚", currentRow.sunrise],
    ["Ø§Ù„Ø¸Ù‡Ø±", currentRow.dhuhr],
    ["Ø§Ù„Ø¹ØµØ±", currentRow.asr],
    ["Ø§Ù„Ù…ØºØ±Ø¨", currentRow.maghrib],
    ["Ø§Ù„Ø¹Ø´Ø§Ø¡", currentRow.isha]
  ];

  var grid = document.getElementById("times");
  grid.innerHTML = "";
  for(var i=0;i<prayers.length;i++){
    var c = document.createElement("div");
    c.className = "card";
    c.innerHTML = "<div class='pname'>"+prayers[i][0]+"</div><div class='ptime'>"+prayers[i][1]+"</div>";
    grid.appendChild(c);
  }

  document.getElementById("iftarAt").innerHTML = "ÙˆÙ‚Øª Ø§Ù„Ù…ØºØ±Ø¨: " + currentRow.maghrib;

  if(!timersStarted){
    timersStarted = true;
    startTickers();
  }
}

function computeNextPrayer(){
  if(!currentRow){ return null; }

  var now = new Date();

  var order = [
    {name:"Ø§Ù„ÙØ¬Ø±", time: currentRow.fajr},
    {name:"Ø§Ù„Ø¸Ù‡Ø±", time: currentRow.dhuhr},
    {name:"Ø§Ù„Ø¹ØµØ±", time: currentRow.asr},
    {name:"Ø§Ù„Ù…ØºØ±Ø¨", time: currentRow.maghrib},
    {name:"Ø§Ù„Ø¹Ø´Ø§Ø¡", time: currentRow.isha}
  ];

  var i;
  for(i=0;i<order.length;i++){
    var t = makeTodayAt(order[i].time);
    if(t.getTime() > now.getTime()){
      return { name: order[i].name, target: t };
    }
  }

  // if none left today -> next is fajr tomorrow
  var fajrTomorrow = makeTodayAt(currentRow.fajr);
  fajrTomorrow.setDate(fajrTomorrow.getDate() + 1);
  return { name:"Ø§Ù„ÙØ¬Ø±", target: fajrTomorrow };
}

function tickOnce(){
  // clock
  var now = new Date();
  var c = format12h(now);
  document.getElementById("clock").innerHTML = c.text + " <small>"+c.ampm+"</small>";

  // if date changed, rerender
  var key = todayKey();
  if(!currentRow || !SHJ[key] || currentRow !== SHJ[key]){
    renderToday();
  }

  if(!currentRow){ return; }

  // Iftar countdown (maghrib today)
  var iftarTarget = makeTodayAt(currentRow.maghrib);
  var diffIftar = iftarTarget.getTime() - now.getTime();
  document.getElementById("iftarCount").innerHTML = diffToHMS(diffIftar);

  // Next prayer countdown
  var next = computeNextPrayer();
  if(next){
    document.getElementById("nextName").innerHTML = next.name;
    document.getElementById("nextCount").innerHTML = diffToHMS(next.target.getTime() - now.getTime());
  }
}

function startTickers(){
  tickOnce();
  setInterval(tickOnce, 1000);
}

/* init */
renderToday();
startTickers();

</script>

</body>
</html>
