<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <title>Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© - Ø§Ù„Ø´Ø§Ø±Ù‚Ø© | Ù…Ø±ÙƒØ² ÙƒÙ„Ù…Ø§Øª</title>

  <!-- Ø®Ø· Ø¹Ø±Ø¨ÙŠ Ø£Ù†ÙŠÙ‚ (Ø®ÙÙŠÙ + Ø±Ø³Ù…ÙŠ) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Naskh+Arabic:wght@400;600;700&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#f6fbff;
      --bg2:#fbf7ff;
      --ink:#0f172a;
      --muted:#475569;
      --panel:#ffffff;
      --panel2:#fbfdff;
      --stroke:rgba(15,23,42,.08);

      --gold1:#b8860b;
      --gold2:#f4d37a;
      --gold3:#8a6408;

      --shadow: 0 18px 40px rgba(15,23,42,.10);
      --radius: 22px;
    }

    *{box-sizing:border-box;}
    html,body{height:100%;}
    body{
      margin:0;
      color:var(--ink);
      font-family:"Tajawal","Noto Naskh Arabic",system-ui,-apple-system,Segoe UI,Arial;
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(59,130,246,.08), transparent 60%),
        radial-gradient(900px 600px at 90% 85%, rgba(236,72,153,.07), transparent 55%),
        linear-gradient(135deg,var(--bg1),var(--bg2));
      /* Ù…Ù…Ù†ÙˆØ¹ Ø£ÙŠ ÙÙ„ØªØ±/Ø£ÙˆØ¨Ø§Ø³ÙŠØªÙŠ Ø¹Ø§Ù… */
      filter:none !important;
      opacity:1 !important;
      overflow:hidden;
    }

    /* Ø¥Ø·Ø§Ø± Ø°Ù‡Ø¨ÙŠ Ø±ÙÙŠØ¹ */
    .frame{
      position:fixed; inset:14px;
      border-radius:28px;
      border:3px solid rgba(184,134,11,.55);
      box-shadow: inset 0 0 0 1px rgba(244,211,122,.45);
      pointer-events:none;
    }

    .wrap{
      height:100vh; width:100vw;
      padding:22px 26px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    .topbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:18px;
    }

    /* Ø³Ø§Ø¹Ø© Ù†Ø§Ø¹Ù…Ø© ÙˆÙˆØ§Ø¶Ø­Ø© */
    .clock{
      direction:ltr;
      display:flex;
      align-items:flex-end;
      gap:10px;
    }
    .clock .time{
      font-size:84px;
      font-weight:800;
      letter-spacing:.5px;
      line-height:1;
    }
    .clock .ampm{
      font-size:40px;
      font-weight:700;
      color:var(--muted);
      transform:translateY(-6px);
    }

    .brand{
      display:flex;
      align-items:flex-start;
      gap:14px;
    }
    .brand .title{
      text-align:right;
      padding-top:6px;
    }
    .brand .title .h{
      font-family:"Noto Naskh Arabic","Tajawal",serif;
      font-size:30px;
      font-weight:700;
    }
    .brand .title .s{
      margin-top:2px;
      font-size:16px;
      color:var(--muted);
      font-weight:600;
    }
    .brand img{
      width:64px; height:64px;
      object-fit:contain;
      border-radius:14px;
      background:rgba(255,255,255,.7);
      border:1px solid var(--stroke);
      box-shadow:0 10px 25px rgba(15,23,42,.08);
    }

    .dateRow{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:12px;
      background:rgba(255,255,255,.75);
      border:1px solid var(--stroke);
      border-radius:16px;
      padding:10px 14px;
      box-shadow:0 10px 28px rgba(15,23,42,.06);
      backdrop-filter:saturate(120%) blur(6px);
    }
    .dateRow .dateText{
      font-size:20px;
      font-weight:700;
      color:#1f2937;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width:72vw;
    }

    /* Ø´Ø§Ø±Ø© Ø±Ù…Ø¶Ø§Ù† Ø°Ù‡Ø¨ÙŠØ© ØµØºÙŠØ±Ø© */
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 14px;
      border-radius:999px;
      background:linear-gradient(135deg,var(--gold1),var(--gold2));
      color:#1b1402;
      font-weight:800;
      font-size:16px;
      border:1px solid rgba(138,100,8,.35);
      box-shadow:0 10px 24px rgba(184,134,11,.25);
      flex:0 0 auto;
    }

    /* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø°Ù‡Ø¨ÙŠ Ø§Ù„Ø±Ø³Ù…ÙŠ */
    .banner{
      position:relative;
      background: linear-gradient(135deg, var(--gold1) 0%, var(--gold2) 45%, #f9e4a6 55%, var(--gold1) 100%);
      border:1px solid rgba(138,100,8,.35);
      border-radius:var(--radius);
      padding:18px 18px;
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .banner .txt{
      font-family:"Noto Naskh Arabic","Tajawal",serif;
      text-align:center;
      font-size:34px;
      font-weight:700;
      color:#1a1405;
      line-height:1.25;
    }

    .grid{
      flex:1;
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:16px;
      min-height:0;
    }

    .card{
      background:rgba(255,255,255,.92);
      border:1px solid var(--stroke);
      border-radius:var(--radius);
      padding:18px 18px;
      box-shadow:0 16px 36px rgba(15,23,42,.08);
      min-height:0;
    }
    .card .k{
      font-family:"Noto Naskh Arabic","Tajawal",serif;
      font-size:24px;
      font-weight:700;
      color:#111827;
      text-align:center;
      margin-bottom:10px;
    }
    .card .v{
      direction:ltr;
      font-size:34px;
      font-weight:900;
      text-align:center;
      letter-spacing:.5px;
    }

    .bottom{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:16px;
      margin-top:2px;
    }
    .big{
      background:rgba(255,255,255,.94);
      border:1px solid var(--stroke);
      border-radius:var(--radius);
      padding:18px 18px;
      box-shadow:0 18px 40px rgba(15,23,42,.10);
      min-height:140px;
    }
    .big .h{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      margin-bottom:8px;
      font-family:"Noto Naskh Arabic","Tajawal",serif;
      font-size:22px;
      font-weight:800;
      color:#111827;
    }
    .big .sub{
      font-size:16px;
      color:var(--muted);
      font-weight:700;
    }
    .big .count{
      direction:ltr;
      text-align:center;
      font-size:66px;
      font-weight:1000;
      letter-spacing:1px;
      margin-top:8px;
    }

    .footer{
      text-align:center;
      font-size:13px;
      color:rgba(71,85,105,.85);
      font-weight:700;
      padding-top:2px;
    }

    /* Ù†Ø³Ø®Ø© Android Ù…Ø¶ØºÙˆØ·Ø© (Ø¥Ù† Ø§Ø­ØªØ¬Ù†Ø§) */
    .android .clock .time{font-size:92px;}
    .android .banner .txt{font-size:36px;}
    .android .card .v{font-size:38px;}
    .android .big .count{font-size:70px;}

    @media (max-width:1200px){
      .clock .time{font-size:70px;}
      .banner .txt{font-size:30px;}
      .grid{grid-template-columns:1fr 1fr;}
      .bottom{grid-template-columns:1fr;}
    }
  </style>
</head>

<body>
  <div class="frame"></div>

  <div class="wrap" id="app">
    <div class="topbar">
      <div class="clock">
        <div class="time" id="clockTime">--:--</div>
        <div class="ampm" id="clockAmPm">--</div>
      </div>

      <div class="brand">
        <div class="title">
          <div class="h">Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© - Ø¥Ù…Ø§Ø±Ø© Ø§Ù„Ø´Ø§Ø±Ù‚Ø©</div>
          <div class="s">Ø¹Ø±Ø¶ ÙØ§Ø®Ø± Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„</div>
        </div>
        <img id="logo" alt="Kalimat" />
      </div>
    </div>

    <div class="dateRow">
      <span class="badge" id="ramadanBadge" style="display:none;">Ø§Ù„ÙŠÙˆÙ… -- Ù…Ù† Ø±Ù…Ø¶Ø§Ù†</span>
      <div class="dateText" id="dateLine">--</div>
    </div>

    <div class="banner">
      <div class="txt">Ù…Ø±ÙƒØ² ÙƒÙ„Ù…Ø§Øª Ù„Ù„ØªØ£Ù‡ÙŠÙ„ ÙˆØ¹Ù„Ø§Ø¬ Ø§Ù„Ù†Ø·Ù‚ ÙŠØªÙ…Ù†Ù‰ Ù„ÙƒÙ… ØµÙŠØ§Ù…Ø§Ù‹ Ù…Ù‚Ø¨ÙˆÙ„Ø§Ù‹ ÙˆØ¥ÙØ·Ø§Ø±Ø§Ù‹ Ù‡Ù†ÙŠØ¦Ø§Ù‹ ğŸŒ™</div>
    </div>

    <div class="grid">
      <div class="card">
        <div class="k">Ø§Ù„ÙØ¬Ø±</div>
        <div class="v" id="fajr">--:--</div>
      </div>
      <div class="card">
        <div class="k">Ø§Ù„Ø´Ø±ÙˆÙ‚</div>
        <div class="v" id="sunrise">--:--</div>
      </div>
      <div class="card">
        <div class="k">Ø§Ù„Ø¸Ù‡Ø±</div>
        <div class="v" id="dhuhr">--:--</div>
      </div>

      <div class="card">
        <div class="k">Ø§Ù„Ø¹ØµØ±</div>
        <div class="v" id="asr">--:--</div>
      </div>
      <div class="card">
        <div class="k">Ø§Ù„Ù…ØºØ±Ø¨</div>
        <div class="v" id="maghrib">--:--</div>
      </div>
      <div class="card">
        <div class="k">Ø§Ù„Ø¹Ø´Ø§Ø¡</div>
        <div class="v" id="isha">--:--</div>
      </div>
    </div>

    <div class="bottom">
      <div class="big" id="iftarBox">
        <div class="h">
          <span>ÙˆÙ‚Øª Ø§Ù„Ø¥ÙØ·Ø§Ø± (Ø§Ù„Ù…ØºØ±Ø¨)</span>
          <span class="sub" id="iftarSub">ÙˆÙ‚Øª Ø§Ù„Ù…ØºØ±Ø¨: --:--</span>
        </div>
        <div class="count" id="iftarCountdown">--:--:--</div>
      </div>

      <div class="big" id="nextBox">
        <div class="h">
          <span>Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</span>
          <span class="sub" id="nextSub">--</span>
        </div>
        <div class="count" id="nextCountdown">--:--:--</div>
      </div>
    </div>

    <div class="footer">Ø¬Ø¯ÙˆÙ„ Ø«Ø§Ø¨Øª Ù…Ø·Ø§Ø¨Ù‚ Ù„Ø­ÙƒÙˆÙ…Ø© Ø§Ù„Ø´Ø§Ø±Ù‚Ø© (ÙØ¨Ø±Ø§ÙŠØ± + Ù…Ø§Ø±Ø³ 2026) â€” ÙŠØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</div>
  </div>

<script>
/* ========= Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ========= */
const TIMEZONE = "Asia/Dubai";          // Sharjah / UAE
const LOGO_SRC = "logo.png";

/* ÙˆØ¶Ø¹ Android (Ù…Ø¬Ø±Ø¯ ØªÙƒØ¨ÙŠØ±/ØªÙˆØ¶ÙŠØ­) */
(function setMode(){
  const v = new URLSearchParams(location.search).get("v") || "";
  if (v.toLowerCase().includes("android") || v.toLowerCase().includes("premium-32")){
    document.getElementById("app").classList.add("android");
  }
})();

/* ========= Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø´Ø§Ø±Ù‚Ø© Ø§Ù„Ø«Ø§Ø¨Øª (ÙØ¨Ø±Ø§ÙŠØ± + Ù…Ø§Ø±Ø³ 2026) =========
   ØµÙŠØºØ© Ø§Ù„ÙˆÙ‚Øª Ù‡Ù†Ø§: "5:42 Øµ" / "12:34 Ù…"
*/
const PRAYER_TABLE = {
  // ===== ÙØ¨Ø±Ø§ÙŠØ± 2026 =====
  "2026-02-01": { hijri:"13 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:42 Øµ", sunrise:"6:58 Øµ", dhuhr:"12:34 Ù…", asr:"3:41 Ù…", maghrib:"6:05 Ù…", isha:"7:21 Ù…" },
  "2026-02-02": { hijri:"14 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:42 Øµ", sunrise:"6:58 Øµ", dhuhr:"12:34 Ù…", asr:"3:41 Ù…", maghrib:"6:06 Ù…", isha:"7:22 Ù…" },
  "2026-02-03": { hijri:"15 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:41 Øµ", sunrise:"6:57 Øµ", dhuhr:"12:34 Ù…", asr:"3:42 Ù…", maghrib:"6:07 Ù…", isha:"7:23 Ù…" },
  "2026-02-04": { hijri:"16 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:41 Øµ", sunrise:"6:57 Øµ", dhuhr:"12:34 Ù…", asr:"3:42 Ù…", maghrib:"6:07 Ù…", isha:"7:23 Ù…" },
  "2026-02-05": { hijri:"17 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:40 Øµ", sunrise:"6:56 Øµ", dhuhr:"12:35 Ù…", asr:"3:43 Ù…", maghrib:"6:08 Ù…", isha:"7:24 Ù…" },
  "2026-02-06": { hijri:"18 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:40 Øµ", sunrise:"6:55 Øµ", dhuhr:"12:35 Ù…", asr:"3:43 Ù…", maghrib:"6:09 Ù…", isha:"7:24 Ù…" },
  "2026-02-07": { hijri:"19 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:40 Øµ", sunrise:"6:55 Øµ", dhuhr:"12:35 Ù…", asr:"3:44 Ù…", maghrib:"6:10 Ù…", isha:"7:25 Ù…" },
  "2026-02-08": { hijri:"20 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:39 Øµ", sunrise:"6:54 Øµ", dhuhr:"12:35 Ù…", asr:"3:44 Ù…", maghrib:"6:10 Ù…", isha:"7:26 Ù…" },
  "2026-02-09": { hijri:"21 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:39 Øµ", sunrise:"6:54 Øµ", dhuhr:"12:35 Ù…", asr:"3:45 Ù…", maghrib:"6:11 Ù…", isha:"7:26 Ù…" },
  "2026-02-10": { hijri:"22 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:38 Øµ", sunrise:"6:53 Øµ", dhuhr:"12:35 Ù…", asr:"3:45 Ù…", maghrib:"6:12 Ù…", isha:"7:27 Ù…" },
  "2026-02-11": { hijri:"23 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:37 Øµ", sunrise:"6:52 Øµ", dhuhr:"12:35 Ù…", asr:"3:46 Ù…", maghrib:"6:12 Ù…", isha:"7:27 Ù…" },
  "2026-02-12": { hijri:"24 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:37 Øµ", sunrise:"6:52 Øµ", dhuhr:"12:35 Ù…", asr:"3:46 Ù…", maghrib:"6:13 Ù…", isha:"7:28 Ù…" },
  "2026-02-13": { hijri:"25 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:36 Øµ", sunrise:"6:51 Øµ", dhuhr:"12:35 Ù…", asr:"3:47 Ù…", maghrib:"6:14 Ù…", isha:"7:28 Ù…" },
  "2026-02-14": { hijri:"26 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:36 Øµ", sunrise:"6:50 Øµ", dhuhr:"12:35 Ù…", asr:"3:47 Ù…", maghrib:"6:14 Ù…", isha:"7:29 Ù…" },
  "2026-02-15": { hijri:"27 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:35 Øµ", sunrise:"6:50 Øµ", dhuhr:"12:35 Ù…", asr:"3:47 Ù…", maghrib:"6:15 Ù…", isha:"7:29 Ù…" },
  "2026-02-16": { hijri:"28 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:34 Øµ", sunrise:"6:49 Øµ", dhuhr:"12:35 Ù…", asr:"3:48 Ù…", maghrib:"6:15 Ù…", isha:"7:30 Ù…" },
  "2026-02-17": { hijri:"29 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:34 Øµ", sunrise:"6:48 Øµ", dhuhr:"12:35 Ù…", asr:"3:48 Ù…", maghrib:"6:16 Ù…", isha:"7:31 Ù…" },
  "2026-02-18": { hijri:"30 Ø´Ø¹Ø¨Ø§Ù† 1447", fajr:"5:33 Øµ", sunrise:"6:47 Øµ", dhuhr:"12:34 Ù…", asr:"3:48 Ù…", maghrib:"6:17 Ù…", isha:"7:31 Ù…" },
  "2026-02-19": { hijri:"1 Ø±Ù…Ø¶Ø§Ù† 1447",  fajr:"5:32 Øµ", sunrise:"6:47 Øµ", dhuhr:"12:34 Ù…", asr:"3:49 Ù…", maghrib:"6:17 Ù…", isha:"7:32 Ù…" },
  "2026-02-20": { hijri:"2 Ø±Ù…Ø¶Ø§Ù† 1447",  fajr:"5:32 Øµ", sunrise:"6:46 Øµ", dhuhr:"12:34 Ù…", asr:"3:49 Ù…", maghrib:"6:18 Ù…", isha:"7:32 Ù…" },
  "2026-02-21": { hijri:"3 Ø±Ù…Ø¶Ø§Ù† 1447",  fajr:"5:31 Øµ", sunrise:"6:45 Øµ", dhuhr:"12:34 Ù…", asr:"3:49 Ù…", maghrib:"6:18 Ù…", isha:"7:33 Ù…" },
  "2026-02-22": { hijri:"4 Ø±Ù…Ø¶Ø§Ù† 1447",  fajr:"5:30 Øµ", sunrise:"6:44 Øµ", dhuhr:"12:34 Ù…", asr:"3:50 Ù…", maghrib:"6:19 Ù…", isha:"7:33 Ù…" },
  "2026-02-23": { hijri:"5 Ø±Ù…Ø¶Ø§Ù† 1447",  fajr:"5:29 Øµ", sunrise:"6:43 Øµ", dhuhr:"12:34 Ù…", asr:"3:50 Ù…", maghrib:"6:20 Ù…", isha:"7:34 Ù…" },
  "2026-02-24": { hijri:"6 Ø±Ù…Ø¶Ø§Ù† 1447",  fajr:"5:29 Øµ", sunrise:"6:43 Øµ", dhuhr:"12:34 Ù…", asr:"3:50 Ù…", maghrib:"6:20 Ù…", isha:"7:34 Ù…" },
  "2026-02-25": { hijri:"7 Ø±Ù…Ø¶Ø§Ù† 1447",  fajr:"5:28 Øµ", sunrise:"6:42 Øµ", dhuhr:"12:34 Ù…", asr:"3:51 Ù…", maghrib:"6:21 Ù…", isha:"7:35 Ù…" },
  "2026-02-26": { hijri:"8 Ø±Ù…Ø¶Ø§Ù† 1447",  fajr:"5:27 Øµ", sunrise:"6:41 Øµ", dhuhr:"12:33 Ù…", asr:"3:51 Ù…", maghrib:"6:21 Ù…", isha:"7:35 Ù…" },
  "2026-02-27": { hijri:"9 Ø±Ù…Ø¶Ø§Ù† 1447",  fajr:"5:26 Øµ", sunrise:"6:40 Øµ", dhuhr:"12:33 Ù…", asr:"3:51 Ù…", maghrib:"6:22 Ù…", isha:"7:36 Ù…" },
  "2026-02-28": { hijri:"10 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:25 Øµ", sunrise:"6:39 Øµ", dhuhr:"12:33 Ù…", asr:"3:51 Ù…", maghrib:"6:22 Ù…", isha:"7:36 Ù…" },

  // ===== Ù…Ø§Ø±Ø³ 2026 =====
  "2026-03-01": { hijri:"11 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:24 Øµ", sunrise:"6:38 Øµ", dhuhr:"12:33 Ù…", asr:"3:51 Ù…", maghrib:"6:23 Ù…", isha:"7:37 Ù…" },
  "2026-03-02": { hijri:"12 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:24 Øµ", sunrise:"6:37 Øµ", dhuhr:"12:33 Ù…", asr:"3:52 Ù…", maghrib:"6:23 Ù…", isha:"7:37 Ù…" },
  "2026-03-03": { hijri:"13 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:23 Øµ", sunrise:"6:36 Øµ", dhuhr:"12:33 Ù…", asr:"3:52 Ù…", maghrib:"6:24 Ù…", isha:"7:38 Ù…" },
  "2026-03-04": { hijri:"14 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:22 Øµ", sunrise:"6:35 Øµ", dhuhr:"12:32 Ù…", asr:"3:52 Ù…", maghrib:"6:24 Ù…", isha:"7:38 Ù…" },
  "2026-03-05": { hijri:"15 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:21 Øµ", sunrise:"6:34 Øµ", dhuhr:"12:32 Ù…", asr:"3:52 Ù…", maghrib:"6:25 Ù…", isha:"7:39 Ù…" },
  "2026-03-06": { hijri:"16 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:20 Øµ", sunrise:"6:33 Øµ", dhuhr:"12:32 Ù…", asr:"3:52 Ù…", maghrib:"6:25 Ù…", isha:"7:39 Ù…" },
  "2026-03-07": { hijri:"17 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:19 Øµ", sunrise:"6:32 Øµ", dhuhr:"12:32 Ù…", asr:"3:52 Ù…", maghrib:"6:26 Ù…", isha:"7:40 Ù…" },
  "2026-03-08": { hijri:"18 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:18 Øµ", sunrise:"6:31 Øµ", dhuhr:"12:31 Ù…", asr:"3:52 Ù…", maghrib:"6:26 Ù…", isha:"7:40 Ù…" },
  "2026-03-09": { hijri:"19 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:17 Øµ", sunrise:"6:30 Øµ", dhuhr:"12:31 Ù…", asr:"3:52 Ù…", maghrib:"6:27 Ù…", isha:"7:41 Ù…" },
  "2026-03-10": { hijri:"20 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:16 Øµ", sunrise:"6:29 Øµ", dhuhr:"12:31 Ù…", asr:"3:53 Ù…", maghrib:"6:27 Ù…", isha:"7:41 Ù…" },
  "2026-03-11": { hijri:"21 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:15 Øµ", sunrise:"6:28 Øµ", dhuhr:"12:31 Ù…", asr:"3:53 Ù…", maghrib:"6:28 Ù…", isha:"7:42 Ù…" },
  "2026-03-12": { hijri:"22 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:14 Øµ", sunrise:"6:27 Øµ", dhuhr:"12:30 Ù…", asr:"3:53 Ù…", maghrib:"6:28 Ù…", isha:"7:42 Ù…" },
  "2026-03-13": { hijri:"23 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:13 Øµ", sunrise:"6:26 Øµ", dhuhr:"12:30 Ù…", asr:"3:53 Ù…", maghrib:"6:29 Ù…", isha:"7:43 Ù…" },
  "2026-03-14": { hijri:"24 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:12 Øµ", sunrise:"6:25 Øµ", dhuhr:"12:30 Ù…", asr:"3:53 Ù…", maghrib:"6:29 Ù…", isha:"7:43 Ù…" },
  "2026-03-15": { hijri:"25 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:11 Øµ", sunrise:"6:24 Øµ", dhuhr:"12:30 Ù…", asr:"3:53 Ù…", maghrib:"6:30 Ù…", isha:"7:44 Ù…" },
  "2026-03-16": { hijri:"26 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:10 Øµ", sunrise:"6:23 Øµ", dhuhr:"12:29 Ù…", asr:"3:53 Ù…", maghrib:"6:30 Ù…", isha:"7:44 Ù…" },
  "2026-03-17": { hijri:"27 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:09 Øµ", sunrise:"6:22 Øµ", dhuhr:"12:29 Ù…", asr:"3:53 Ù…", maghrib:"6:31 Ù…", isha:"7:44 Ù…" },
  "2026-03-18": { hijri:"28 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:08 Øµ", sunrise:"6:21 Øµ", dhuhr:"12:29 Ù…", asr:"3:53 Ù…", maghrib:"6:31 Ù…", isha:"7:45 Ù…" },
  "2026-03-19": { hijri:"29 Ø±Ù…Ø¶Ø§Ù† 1447", fajr:"5:07 Øµ", sunrise:"6:20 Øµ", dhuhr:"12:28 Ù…", asr:"3:53 Ù…", maghrib:"6:32 Ù…", isha:"7:45 Ù…" },
  "2026-03-20": { hijri:"1 Ø´ÙˆØ§Ù„ 1447",  fajr:"5:05 Øµ", sunrise:"6:19 Øµ", dhuhr:"12:28 Ù…", asr:"3:53 Ù…", maghrib:"6:32 Ù…", isha:"7:46 Ù…" },
  "2026-03-21": { hijri:"2 Ø´ÙˆØ§Ù„ 1447",  fajr:"5:04 Øµ", sunrise:"6:18 Øµ", dhuhr:"12:28 Ù…", asr:"3:53 Ù…", maghrib:"6:33 Ù…", isha:"7:46 Ù…" },
  "2026-03-22": { hijri:"3 Ø´ÙˆØ§Ù„ 1447",  fajr:"5:03 Øµ", sunrise:"6:17 Øµ", dhuhr:"12:27 Ù…", asr:"3:52 Ù…", maghrib:"6:33 Ù…", isha:"7:47 Ù…" },
  "2026-03-23": { hijri:"4 Ø´ÙˆØ§Ù„ 1447",  fajr:"5:02 Øµ", sunrise:"6:16 Øµ", dhuhr:"12:27 Ù…", asr:"3:52 Ù…", maghrib:"6:33 Ù…", isha:"7:48 Ù…" },
  "2026-03-24": { hijri:"5 Ø´ÙˆØ§Ù„ 1447",  fajr:"5:01 Øµ", sunrise:"6:15 Øµ", dhuhr:"12:27 Ù…", asr:"3:52 Ù…", maghrib:"6:34 Ù…", isha:"7:48 Ù…" },
  "2026-03-25": { hijri:"6 Ø´ÙˆØ§Ù„ 1447",  fajr:"5:00 Øµ", sunrise:"6:14 Øµ", dhuhr:"12:27 Ù…", asr:"3:52 Ù…", maghrib:"6:34 Ù…", isha:"7:49 Ù…" },
  "2026-03-26": { hijri:"7 Ø´ÙˆØ§Ù„ 1447",  fajr:"4:59 Øµ", sunrise:"6:13 Øµ", dhuhr:"12:26 Ù…", asr:"3:52 Ù…", maghrib:"6:35 Ù…", isha:"7:49 Ù…" },
  "2026-03-27": { hijri:"8 Ø´ÙˆØ§Ù„ 1447",  fajr:"4:58 Øµ", sunrise:"6:12 Øµ", dhuhr:"12:26 Ù…", asr:"3:52 Ù…", maghrib:"6:35 Ù…", isha:"7:50 Ù…" },
  "2026-03-28": { hijri:"9 Ø´ÙˆØ§Ù„ 1447",  fajr:"4:57 Øµ", sunrise:"6:11 Øµ", dhuhr:"12:26 Ù…", asr:"3:52 Ù…", maghrib:"6:36 Ù…", isha:"7:50 Ù…" },
  "2026-03-29": { hijri:"10 Ø´ÙˆØ§Ù„ 1447", fajr:"4:55 Øµ", sunrise:"6:10 Øµ", dhuhr:"12:25 Ù…", asr:"3:52 Ù…", maghrib:"6:36 Ù…", isha:"7:51 Ù…" },
  "2026-03-30": { hijri:"11 Ø´ÙˆØ§Ù„ 1447", fajr:"4:54 Øµ", sunrise:"6:09 Øµ", dhuhr:"12:25 Ù…", asr:"3:52 Ù…", maghrib:"6:37 Ù…", isha:"7:51 Ù…" },
  "2026-03-31": { hijri:"12 Ø´ÙˆØ§Ù„ 1447", fajr:"4:53 Øµ", sunrise:"6:08 Øµ", dhuhr:"12:25 Ù…", asr:"3:51 Ù…", maghrib:"6:37 Ù…", isha:"7:52 Ù…" },
};

/* ========= Ø£Ø¯ÙˆØ§Øª ÙˆÙ‚Øª/ØªØ§Ø±ÙŠØ® ========= */
function pad2(n){ return String(n).padStart(2,"0"); }

function getDubaiNow(){
  // Ø·Ø±ÙŠÙ‚Ø© Ø¢Ù…Ù†Ø© ØªØ¹Ø·ÙŠ ÙˆÙ‚Øª Ø¯Ø¨ÙŠ Ø­ØªÙ‰ Ù„Ùˆ Ø¬Ù‡Ø§Ø² Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø®ØªÙ„Ù
  // Ù†Ø­ÙˆÙ„Ù‡Ø§ Ø¥Ù„Ù‰ "Ø£Ø¬Ø²Ø§Ø¡" Ø«Ù… Ù†Ø¹ÙŠØ¯ Ø¨Ù†Ø§Ø¡ Date Ù…Ø­Ù„ÙŠØ© Ù…ÙƒØ§ÙØ¦Ø©
  const parts = new Intl.DateTimeFormat("en-CA", {
    timeZone: TIMEZONE,
    year:"numeric", month:"2-digit", day:"2-digit",
    hour:"2-digit", minute:"2-digit", second:"2-digit",
    hour12:false
  }).formatToParts(new Date());
  const m = Object.fromEntries(parts.map(p=>[p.type,p.value]));
  return {
    y: +m.year, mo:+m.month, d:+m.day,
    hh:+m.hour, mm:+m.minute, ss:+m.second
  };
}

function ymdFromDubai(){
  const n = getDubaiNow();
  return `${n.y}-${pad2(n.mo)}-${pad2(n.d)}`;
}

function toMinutesFromArabic(timeStr){
  // "5:29 Øµ" / "12:34 Ù…"
  const s = (timeStr || "").trim();
  const m = s.match(/^(\d{1,2}):(\d{2})\s*(Øµ|Ù…)$/);
  if(!m) return null;
  let h = parseInt(m[1],10);
  const min = parseInt(m[2],10);
  const ap = m[3];
  if (ap === "Øµ"){
    if (h === 12) h = 0;
  } else { // "Ù…"
    if (h !== 12) h += 12;
  }
  return h*60 + min;
}

function fmt24ToDisplay(hh, mm){
  // Ø¹Ø±Ø¶ Ù†Ø§Ø¹Ù…: 12-hour Ø¹Ø±Ø¨ÙŠ
  const isPM = hh >= 12;
  let h12 = hh % 12; if (h12 === 0) h12 = 12;
  return { t:`${h12}:${pad2(mm)}`, ap: isPM ? "Ù…" : "Øµ" };
}

function secondsUntil(targetMin, nowMin, nowSec){
  // target within same day; if passed -> until next day
  let diffMin = targetMin - nowMin;
  if (diffMin < 0) diffMin += 24*60;
  let diffSec = diffMin*60 - nowSec;
  if (diffSec < 0) diffSec = 0;
  return diffSec;
}

function formatHMS(totalSec){
  const h = Math.floor(totalSec/3600);
  const m = Math.floor((totalSec%3600)/60);
  const s = totalSec%60;
  return `${pad2(h)}:${pad2(m)}:${pad2(s)}`;
}

/* ========= ØªØ¹Ø¨Ø¦Ø© ÙˆØ§Ø¬Ù‡Ø© ========= */
const el = (id)=>document.getElementById(id);

function setLogo(){
  const logo = el("logo");
  // decode is ok: GitHub pages supports encoded spaces
  logo.src = LOGO_SRC;
}

function setPrayerTimes(row){
  el("fajr").textContent = row ? row.fajr.replace(" Øµ","").replace(" Ù…","") : "--:--";
  el("sunrise").textContent = row ? row.sunrise.replace(" Øµ","").replace(" Ù…","") : "--:--";
  el("dhuhr").textContent = row ? row.dhuhr.replace(" Øµ","").replace(" Ù…","") : "--:--";
  el("asr").textContent = row ? row.asr.replace(" Øµ","").replace(" Ù…","") : "--:--";
  el("maghrib").textContent = row ? row.maghrib.replace(" Øµ","").replace(" Ù…","") : "--:--";
  el("isha").textContent = row ? row.isha.replace(" Øµ","").replace(" Ù…","") : "--:--";
}

function setDateLine(ymd, row){
  // ÙŠÙˆÙ… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ + Ø§Ù„ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯ÙŠ + Ø§Ù„Ù‡Ø¬Ø±ÙŠ + Ø±Ù…Ø¶Ø§Ù†
  const now = new Date();
  const ar = new Intl.DateTimeFormat("ar-AE", {
    timeZone: TIMEZONE,
    weekday:"long", year:"numeric", month:"long", day:"numeric"
  }).format(now);

  const hijri = row?.hijri ? row.hijri : "--";
  el("dateLine").textContent = `${ar} | ${hijri}`;
}

function setRamadanBadge(row){
  const badge = el("ramadanBadge");
  if(!row || !row.hijri){ badge.style.display="none"; return; }

  // hijri like "7 Ø±Ù…Ø¶Ø§Ù† 1447"
  const m = row.hijri.match(/^(\d{1,2})\s+Ø±Ù…Ø¶Ø§Ù†\s+/);
  if(m){
    badge.textContent = `Ø§Ù„ÙŠÙˆÙ… ${m[1]} Ù…Ù† Ø±Ù…Ø¶Ø§Ù†`;
    badge.style.display="inline-flex";
  }else{
    badge.style.display="none";
  }
}

function computeNextPrayer(row, nowMin, nowSec){
  const order = [
    ["Ø§Ù„ÙØ¬Ø±","fajr"],
    ["Ø§Ù„Ø¸Ù‡Ø±","dhuhr"],
    ["Ø§Ù„Ø¹ØµØ±","asr"],
    ["Ø§Ù„Ù…ØºØ±Ø¨","maghrib"],
    ["Ø§Ù„Ø¹Ø´Ø§Ø¡","isha"],
  ];

  const times = order
    .map(([name,key])=>({ name, key, mins: toMinutesFromArabic(row[key]) }))
    .filter(x=>x.mins!==null);

  // find next in same day, else first tomorrow
  let next = times.find(t=>t.mins > nowMin || (t.mins===nowMin && nowSec===0));
  if(!next) next = times[0];

  const sec = secondsUntil(next.mins, nowMin, nowSec);
  return { nextName: next.name, nextKey: next.key, seconds: sec, nextMins: next.mins };
}

function tick(){
  const n = getDubaiNow();
  const nowMin = n.hh*60 + n.mm;

  // clock
  const disp = fmt24ToDisplay(n.hh, n.mm);
  el("clockTime").textContent = disp.t;
  el("clockAmPm").textContent = disp.ap;

  const ymd = `${n.y}-${pad2(n.mo)}-${pad2(n.d)}`;
  const row = PRAYER_TABLE[ymd];

  setPrayerTimes(row);
  setDateLine(ymd, row);
  setRamadanBadge(row);

  if(!row){
    el("iftarSub").textContent = "ÙˆÙ‚Øª Ø§Ù„Ù…ØºØ±Ø¨: --:--";
    el("iftarCountdown").textContent = "--:--:--";
    el("nextSub").textContent = "--";
    el("nextCountdown").textContent = "--:--:--";
    return;
  }

  // Iftar (Maghrib)
  const magMin = toMinutesFromArabic(row.maghrib);
  const iftarSec = secondsUntil(magMin, nowMin, n.ss);
  el("iftarSub").textContent = `ÙˆÙ‚Øª Ø§Ù„Ù…ØºØ±Ø¨: ${row.maghrib.replace(" Øµ","").replace(" Ù…","")}`;
  el("iftarCountdown").textContent = formatHMS(iftarSec);

  // Next prayer
  const nxt = computeNextPrayer(row, nowMin, n.ss);
  const nextTimeStr = row[nxt.nextKey].replace(" Øµ","").replace(" Ù…","");
  el("nextSub").textContent = `${nxt.nextName} â€” Ø§Ù„ÙˆÙ‚Øª: ${nextTimeStr}`;
  el("nextCountdown").textContent = formatHMS(nxt.seconds);
}

/* ========= ØªØ´ØºÙŠÙ„ ========= */
setLogo();
tick();
setInterval(tick, 1000);
</script>
</body>
</html>
